{
  "tests": [
    {
      "name": "Test Valid Stream Input",
      "definition": "https://raw.githubusercontent.com/t-anba/azure-resource-manager-schemas/t-anbaAzSDeploymentTemplate/schemas/2016-03-01/Microsoft.StreamAnalytics.json#/resourceDefinitions/streamingjobs_inputs",
      "json": {
        "name": "sampleInput",
        "properties": {
          "type": "Stream",
          "serialization": {
            "type": "Csv",
            "properties": {
              "fieldDelimiter": ",",
              "encoding": "UTF8"
            }
          },
          "datasource": {
            "type": "Microsoft.ServiceBus/EventHub",
            "properties": {
              "serviceBusNamespace": "sampleServiceBus",
              "sharedAccessPolicyName": "SampleReceiver",
              "sharedAccessPolicyKey": "***/**********/*****************************",
              "eventHubName": "sampleEventHub"
            }
          }
        }
      }
    },

    {
      "name": "Test Valid Reference Input",
      "definition": "https://raw.githubusercontent.com/t-anba/azure-resource-manager-schemas/t-anbaAzSDeploymentTemplate/schemas/2016-03-01/Microsoft.StreamAnalytics.json#/resourceDefinitions/streamingjobs_inputs",
      "json": {
        "name": "SampleReferenceInput",
        "properties": {
          "type": "Reference",
          "serialization": {
            "type": "Csv",
            "properties": {
              "encoding": "UTF8"
            }
          },
          "datasource": {
            "type": "Microsoft.Storage/Blob",
            "properties": {
              "storageAccounts": [
                {
                  "accountName": "sampleStorageAcount",
                  "accountKey": "***************"
                }

              ],
              "container": "sampleContainer",
              "pathPattern": "patternpart1/patternpart2"
            }
          }
        }
      }
    },

    {
      "name": "Test Valid Reference Input - Multiple storage accounts",
      "definition": "https://raw.githubusercontent.com/t-anba/azure-resource-manager-schemas/t-anbaAzSDeploymentTemplate/schemas/2016-03-01/Microsoft.StreamAnalytics.json#/resourceDefinitions/streamingjobs_inputs",
      "json": {
        "name": "SampleReferenceInput",
        "properties": {
          "type": "Reference",
          "serialization": {
            "type": "Csv",
            "properties": {
              "encoding": "UTF8"
            }
          },
          "datasource": {
            "type": "Microsoft.Storage/Blob",
            "properties": {
              "storageAccounts": [
                {
                  "accountName": "sampleStorageAcount1",
                  "accountKey": "***************"
                },
                {
                  "accountName": "sampleStorageAcount2",
                  "accountKey": "***************"
                }

              ],
              "container": "sampleContainer",
              "pathPattern": "patternpart1/patternpart2"
            }
          }
        }
      }
    },

    {
      "name": "Test Invalid Reference Input - Stream-only type",
      "expectedErrors": [
        {
          "message": "Data does not match any schemas from \"oneOf\"",
          "dataPath": "/properties",
          "schemaPath": "/properties/properties/oneOf",
          "subErrors": [
            {
              "message": "Data does not match any schemas from \"anyOf\"",
              "dataPath": "/properties",
              "schemaPath": "/properties/properties/oneOf/0/anyOf",
              "subErrors": [
                {
                  "message": "Data does not match any schemas from \"oneOf\"",
                  "dataPath": "/properties/datasource",
                  "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf",
                  "subErrors": [
                    {
                      "message": "Data does not match any schemas from \"anyOf\"",
                      "dataPath": "/properties/datasource",
                      "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf",
                      "subErrors": [
                        {
                          "message": "No enum match for: \"Microsoft.ServiceBus/EventHub\"",
                          "dataPath": "/properties/datasource/type",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/type/type"
                        },
                        {
                          "message": "Data does not match any schemas from \"oneOf\"",
                          "dataPath": "/properties/datasource/properties",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf",
                          "subErrors": [
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/serviceBusNamespace",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/sharedAccessPolicyName",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/sharedAccessPolicyKey",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/eventHubName",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Invalid type: object (expected string)",
                              "dataPath": "/properties/datasource/properties",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/1/type"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "message": "Invalid type: object (expected string)",
                      "dataPath": "/properties/datasource",
                      "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/1/type"
                    }
                  ]
                },
                {
                  "message": "No enum match for: \"Reference\"",
                  "dataPath": "/properties/type",
                  "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/type/type"
                }
              ]
            },
            {
              "message": "Invalid type: object (expected string)",
              "dataPath": "/properties",
              "schemaPath": "/properties/properties/oneOf/1/type"
            }
          ]
        }
      ],
      "definition": "https://raw.githubusercontent.com/t-anba/azure-resource-manager-schemas/t-anbaAzSDeploymentTemplate/schemas/2016-03-01/Microsoft.StreamAnalytics.json#/resourceDefinitions/streamingjobs_inputs",
      "json": {
        "name": "SampleReferenceInput",
        "properties": {
          "type": "Reference",
          "serialization": {
            "type": "Csv",
            "properties": {
              "encoding": "UTF8"
            }
          },
          "datasource": {
            "type": "Microsoft.ServiceBus/EventHub",
            "properties": {
              "serviceBusNamespace": "sampleServiceBus",
              "sharedAccessPolicyName": "SampleReceiver",
              "sharedAccessPolicyKey": "***/**********/*****************************",
              "eventHubName": "sampleEventHub"
            }
          }
        }
      }
    },

    {
      "name": "Test Invalid EventHub Input - Misspelled/extra property",
      "expectedErrors": [
        {
          "message": "Data does not match any schemas from \"oneOf\"",
          "dataPath": "/properties",
          "schemaPath": "/properties/properties/oneOf",
          "subErrors": [
            {
              "message": "Data does not match any schemas from \"anyOf\"",
              "dataPath": "/properties",
              "schemaPath": "/properties/properties/oneOf/0/anyOf",
              "subErrors": [
                {
                  "message": "No enum match for: \"Stream\"",
                  "dataPath": "/properties/type",
                  "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/type/type"
                },
                {
                  "message": "Data does not match any schemas from \"oneOf\"",
                  "dataPath": "/properties/datasource",
                  "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf",
                  "subErrors": [
                    {
                      "message": "Data does not match any schemas from \"anyOf\"",
                      "dataPath": "/properties/datasource",
                      "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf",
                      "subErrors": [
                        {
                          "message": "Additional properties not allowed",
                          "dataPath": "/properties/datasource/typee",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/additionalProperties"
                        },
                        {
                          "message": "Data does not match any schemas from \"oneOf\"",
                          "dataPath": "/properties/datasource/properties",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf",
                          "subErrors": [
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/serviceBusNamespace",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/sharedAccessPolicyName",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/sharedAccessPolicyKey",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/eventHubName",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Invalid type: object (expected string)",
                              "dataPath": "/properties/datasource/properties",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/1/type"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "message": "Invalid type: object (expected string)",
                      "dataPath": "/properties/datasource",
                      "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/1/type"
                    }
                  ]
                },
                {
                  "message": "Data does not match any schemas from \"oneOf\"",
                  "dataPath": "/properties/datasource",
                  "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf",
                  "subErrors": [
                    {
                      "message": "Data does not match any schemas from \"anyOf\"",
                      "dataPath": "/properties/datasource",
                      "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf",
                      "subErrors": [
                        {
                          "message": "Additional properties not allowed",
                          "dataPath": "/properties/datasource/typee",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/0/additionalProperties"
                        },
                        {
                          "message": "Data does not match any schemas from \"oneOf\"",
                          "dataPath": "/properties/datasource/properties",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf",
                          "subErrors": [
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/serviceBusNamespace",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/eventHubName",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Invalid type: object (expected string)",
                              "dataPath": "/properties/datasource/properties",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/1/type"
                            }
                          ]
                        },
                        {
                          "message": "Additional properties not allowed",
                          "dataPath": "/properties/datasource/typee",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/1/additionalProperties"
                        },
                        {
                          "message": "Additional properties not allowed",
                          "dataPath": "/properties/datasource/typee",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/2/additionalProperties"
                        },
                        {
                          "message": "Data does not match any schemas from \"oneOf\"",
                          "dataPath": "/properties/datasource/properties",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/2/properties/properties/oneOf",
                          "subErrors": [
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/serviceBusNamespace",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/2/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/sharedAccessPolicyName",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/2/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/sharedAccessPolicyKey",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/2/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/eventHubName",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/2/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Invalid type: object (expected string)",
                              "dataPath": "/properties/datasource/properties",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/2/properties/properties/oneOf/1/type"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "message": "Invalid type: object (expected string)",
                      "dataPath": "/properties/datasource",
                      "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/1/type"
                    }
                  ]
                }
              ]
            },
            {
              "message": "Invalid type: object (expected string)",
              "dataPath": "/properties",
              "schemaPath": "/properties/properties/oneOf/1/type"
            }
          ]
        }
      ],
      "definition": "https://raw.githubusercontent.com/t-anba/azure-resource-manager-schemas/t-anbaAzSDeploymentTemplate/schemas/2016-03-01/Microsoft.StreamAnalytics.json#/resourceDefinitions/streamingjobs_inputs",
      "json": {
        "name": "sampleInput",
        "properties": {
          "type": "Stream",
          "serialization": {
            "type": "Csv",
            "properties": {
              "fieldDelimiter": ",",
              "encoding": "UTF8"
            }
          },
          "datasource": {
            "typee": "Microsoft.ServiceBus/EventHub",
            "properties": {
              "serviceBusNamespace": "sampleServiceBus",
              "sharedAccessPolicyName": "SampleReceiver",
              "sharedAccessPolicyKey": "***/**********/*****************************",
              "eventHubName": "sampleEventHub"
            }
          }
        }
      }
    },

    {
      "name": "Test Invalid EventHub Input - Misspelled/extra subproperty",
      "expectedErrors": [
        {
          "message": "Data does not match any schemas from \"oneOf\"",
          "dataPath": "/properties",
          "schemaPath": "/properties/properties/oneOf",
          "subErrors": [
            {
              "message": "Data does not match any schemas from \"anyOf\"",
              "dataPath": "/properties",
              "schemaPath": "/properties/properties/oneOf/0/anyOf",
              "subErrors": [
                {
                  "message": "No enum match for: \"Stream\"",
                  "dataPath": "/properties/type",
                  "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/type/type"
                },
                {
                  "message": "Data does not match any schemas from \"oneOf\"",
                  "dataPath": "/properties/datasource",
                  "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf",
                  "subErrors": [
                    {
                      "message": "Data does not match any schemas from \"anyOf\"",
                      "dataPath": "/properties/datasource",
                      "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf",
                      "subErrors": [
                        {
                          "message": "Additional properties not allowed",
                          "dataPath": "/properties/datasource/typee",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/additionalProperties"
                        },
                        {
                          "message": "Data does not match any schemas from \"oneOf\"",
                          "dataPath": "/properties/datasource/properties",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf",
                          "subErrors": [
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/serviceBusNamespace",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/sharedAccessPolicyName",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/sharedAccessPolicyKey",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/eventHubNames",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Invalid type: object (expected string)",
                              "dataPath": "/properties/datasource/properties",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/1/type"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "message": "Invalid type: object (expected string)",
                      "dataPath": "/properties/datasource",
                      "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/1/type"
                    }
                  ]
                },
                {
                  "message": "Data does not match any schemas from \"oneOf\"",
                  "dataPath": "/properties/datasource",
                  "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf",
                  "subErrors": [
                    {
                      "message": "Data does not match any schemas from \"anyOf\"",
                      "dataPath": "/properties/datasource",
                      "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf",
                      "subErrors": [
                        {
                          "message": "Additional properties not allowed",
                          "dataPath": "/properties/datasource/typee",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/0/additionalProperties"
                        },
                        {
                          "message": "Data does not match any schemas from \"oneOf\"",
                          "dataPath": "/properties/datasource/properties",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf",
                          "subErrors": [
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/serviceBusNamespace",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/eventHubNames",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Invalid type: object (expected string)",
                              "dataPath": "/properties/datasource/properties",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/1/type"
                            }
                          ]
                        },
                        {
                          "message": "Additional properties not allowed",
                          "dataPath": "/properties/datasource/typee",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/1/additionalProperties"
                        },
                        {
                          "message": "Data does not match any schemas from \"oneOf\"",
                          "dataPath": "/properties/datasource/properties",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/1/properties/properties/oneOf",
                          "subErrors": [
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/eventHubNames",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/1/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Invalid type: object (expected string)",
                              "dataPath": "/properties/datasource/properties",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/1/properties/properties/oneOf/1/type"
                            }
                          ]
                        },
                        {
                          "message": "Additional properties not allowed",
                          "dataPath": "/properties/datasource/typee",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/2/additionalProperties"
                        },
                        {
                          "message": "Data does not match any schemas from \"oneOf\"",
                          "dataPath": "/properties/datasource/properties",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/2/properties/properties/oneOf",
                          "subErrors": [
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/serviceBusNamespace",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/2/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/sharedAccessPolicyName",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/2/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/sharedAccessPolicyKey",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/2/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/eventHubNames",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/2/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Invalid type: object (expected string)",
                              "dataPath": "/properties/datasource/properties",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/0/anyOf/2/properties/properties/oneOf/1/type"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "message": "Invalid type: object (expected string)",
                      "dataPath": "/properties/datasource",
                      "schemaPath": "/properties/properties/oneOf/0/anyOf/1/properties/datasource/oneOf/1/type"
                    }
                  ]
                }
              ]
            },
            {
              "message": "Invalid type: object (expected string)",
              "dataPath": "/properties",
              "schemaPath": "/properties/properties/oneOf/1/type"
            }
          ]
        }
      ],
      "definition": "https://raw.githubusercontent.com/t-anba/azure-resource-manager-schemas/t-anbaAzSDeploymentTemplate/schemas/2016-03-01/Microsoft.StreamAnalytics.json#/resourceDefinitions/streamingjobs_inputs",
      "json": {
        "name": "sampleInput",
        "properties": {
          "type": "Stream",
          "serialization": {
            "type": "Csv",
            "properties": {
              "fieldDelimiter": ",",
              "encoding": "UTF8"
            }
          },
          "datasource": {
            "typee": "Microsoft.ServiceBus/EventHub",
            "properties": {
              "serviceBusNamespace": "sampleServiceBus",
              "sharedAccessPolicyName": "SampleReceiver",
              "sharedAccessPolicyKey": "***/**********/*****************************",
              "eventHubNames": "sampleEventHub"
            }
          }
        }
      }
    },
    {
      "name": "Test Invalid Stream Input - Illegal name",
      "expectedErrors": [
        {
          "message": "Invalid type: object (expected string)",
          "dataPath": "/name",
          "schemaPath": "/properties/name/type"
        }
      ],
      "definition": "https://raw.githubusercontent.com/t-anba/azure-resource-manager-schemas/t-anbaAzSDeploymentTemplate/schemas/2016-03-01/Microsoft.StreamAnalytics.json#/resourceDefinitions/streamingjobs_inputs",
      "json": {
        "name": { },
        "properties": {
          "type": "Stream",
          "serialization": {
            "type": "Csv",
            "properties": {
              "fieldDelimiter": ",",
              "encoding": "UTF8"
            }
          },
          "datasource": {
            "type": "Microsoft.ServiceBus/EventHub",
            "properties": {
              "serviceBusNamespace": "sampleServiceBus",
              "sharedAccessPolicyName": "SampleReceiver",
              "sharedAccessPolicyKey": "***/**********/*****************************",
              "eventHubName": "sampleEventHub"
            }
          }
        }
      }
    },
    {
      "name": "Test Invalid Stream Input - Extra/misspelled property",
      "expectedErrors": [
        {
          "message": "Additional properties not allowed",
          "dataPath": "/namee",
          "schemaPath": "/additionalProperties"
        }
      ],
      "definition": "https://raw.githubusercontent.com/t-anba/azure-resource-manager-schemas/t-anbaAzSDeploymentTemplate/schemas/2016-03-01/Microsoft.StreamAnalytics.json#/resourceDefinitions/streamingjobs_inputs",
      "json": {
        "namee": "sampleInput",
        "properties": {
          "type": "Stream",
          "serialization": {
            "type": "Csv",
            "properties": {
              "fieldDelimiter": ",",
              "encoding": "UTF8"
            }
          },
          "datasource": {
            "type": "Microsoft.ServiceBus/EventHub",
            "properties": {
              "serviceBusNamespace": "sampleServiceBus",
              "sharedAccessPolicyName": "SampleReceiver",
              "sharedAccessPolicyKey": "***/**********/*****************************",
              "eventHubName": "sampleEventHub"
            }
          }
        }
      }
    },
    {
      "name": "Test Valid Stream Input - Extra/misspelled subproperty",
      "expectedErrors": [
        {
          "message": "Data does not match any schemas from \"oneOf\"",
          "dataPath": "/properties",
          "schemaPath": "/properties/properties/oneOf",
          "subErrors": [
            {
              "message": "Data does not match any schemas from \"anyOf\"",
              "dataPath": "/properties",
              "schemaPath": "/properties/properties/oneOf/0/anyOf",
              "subErrors": [
                {
                  "message": "No enum match for: \"Stream\"",
                  "dataPath": "/properties/type",
                  "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/type/type"
                },
                {
                  "message": "Additional properties not allowed",
                  "dataPath": "/properties/seriallization",
                  "schemaPath": "/properties/properties/oneOf/0/anyOf/0/additionalProperties"
                },
                {
                  "message": "Data does not match any schemas from \"oneOf\"",
                  "dataPath": "/properties/datasource",
                  "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf",
                  "subErrors": [
                    {
                      "message": "Data does not match any schemas from \"anyOf\"",
                      "dataPath": "/properties/datasource",
                      "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf",
                      "subErrors": [
                        {
                          "message": "No enum match for: \"Microsoft.ServiceBus/EventHub\"",
                          "dataPath": "/properties/datasource/type",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/type/type"
                        },
                        {
                          "message": "Data does not match any schemas from \"oneOf\"",
                          "dataPath": "/properties/datasource/properties",
                          "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf",
                          "subErrors": [
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/serviceBusNamespace",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/sharedAccessPolicyName",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/sharedAccessPolicyKey",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Additional properties not allowed",
                              "dataPath": "/properties/datasource/properties/eventHubName",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/0/additionalProperties"
                            },
                            {
                              "message": "Invalid type: object (expected string)",
                              "dataPath": "/properties/datasource/properties",
                              "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/0/anyOf/0/properties/properties/oneOf/1/type"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "message": "Invalid type: object (expected string)",
                      "dataPath": "/properties/datasource",
                      "schemaPath": "/properties/properties/oneOf/0/anyOf/0/properties/datasource/oneOf/1/type"
                    }
                  ]
                },
                {
                  "message": "Additional properties not allowed",
                  "dataPath": "/properties/seriallization",
                  "schemaPath": "/properties/properties/oneOf/0/anyOf/1/additionalProperties"
                }
              ]
            },
            {
              "message": "Invalid type: object (expected string)",
              "dataPath": "/properties",
              "schemaPath": "/properties/properties/oneOf/1/type"
            }
          ]
        }
      ],
      "definition": "https://raw.githubusercontent.com/t-anba/azure-resource-manager-schemas/t-anbaAzSDeploymentTemplate/schemas/2016-03-01/Microsoft.StreamAnalytics.json#/resourceDefinitions/streamingjobs_inputs",
      "json": {
        "name": "sampleInput",
        "properties": {
          "type": "Stream",
          "seriallization": {
            "type": "Csv",
            "properties": {
              "fieldDelimiter": ",",
              "encoding": "UTF8"
            }
          },
          "datasource": {
            "type": "Microsoft.ServiceBus/EventHub",
            "properties": {
              "serviceBusNamespace": "sampleServiceBus",
              "sharedAccessPolicyName": "SampleReceiver",
              "sharedAccessPolicyKey": "***/**********/*****************************",
              "eventHubName": "sampleEventHub"
            }
          }
        }
      }
    }
  ]
}
    